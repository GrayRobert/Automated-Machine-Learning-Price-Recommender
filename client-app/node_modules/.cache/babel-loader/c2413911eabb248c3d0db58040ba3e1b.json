{"remainingRequest":"/Users/robertgray/sandbox/price-recommender/client-app/node_modules/babel-loader/lib/index.js!/Users/robertgray/sandbox/price-recommender/client-app/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/robertgray/sandbox/price-recommender/client-app/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/robertgray/sandbox/price-recommender/client-app/src/views/Dashboard.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/robertgray/sandbox/price-recommender/client-app/src/views/Dashboard.vue","mtime":1541970295818},{"path":"/Users/robertgray/sandbox/price-recommender/client-app/node_modules/cache-loader/dist/cjs.js","mtime":1539889924615},{"path":"/Users/robertgray/sandbox/price-recommender/client-app/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/robertgray/sandbox/price-recommender/client-app/node_modules/cache-loader/dist/cjs.js","mtime":1539889924615},{"path":"/Users/robertgray/sandbox/price-recommender/client-app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es7.promise.finally\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport TrainModel from './custom/TrainModel';\nimport { APIService } from '../APIService';\nimport { AtomSpinner } from 'epic-spinners';\nimport moment from 'moment';\nimport numeral from 'numeral';\nvar apiService = new APIService();\nexport default {\n  name: 'dashboard',\n  components: {\n    TrainModel: TrainModel,\n    AtomSpinner: AtomSpinner\n  },\n  data: function data() {\n    return {\n      results: null,\n      model_select_predict: 'RFR',\n      hotel_code: 'TEST1',\n      accom_stars: 3,\n      staff_pick: 0,\n      trip_adv_rating: '3.0',\n      has_swimming_pool: 1,\n      travel_week: 26,\n      booking_week: 26,\n      predictingInProgress: false,\n      history: [],\n      historyFields: [{\n        key: 'id'\n      }, {\n        key: 'model_type'\n      }, {\n        key: 'dependent_variable'\n      }, {\n        key: 'trained_date',\n        formatter: function formatter(value) {\n          return moment(value).format('MMM Do YYYY, h:mm:ss a');\n        }\n      }, {\n        key: 'accuracy_r2',\n        formatter: function formatter(value) {\n          return numeral(value).format('0.00%');\n        }\n      }, {\n        key: 'actions'\n      }],\n      currentPage: 1,\n      perPage: 8,\n      totalRows: 0\n    };\n  },\n  methods: {\n    getPrediction: function getPrediction() {\n      var _this = this;\n\n      this.predictingInProgress = true;\n      var queryString = 'hotel_code=' + this.hotel_code + '&staff_pick=' + this.staff_pick + '&has_swimming_pool=' + this.has_swimming_pool + '&trip_adv_rating=' + this.trip_adv_rating + '&accom_stars=' + this.accom_stars + '&travel_week=' + this.travel_week + '&booking_week=' + this.booking_week + '&model_type=' + this.model_select_predict;\n      console.log('Query String is: ' + queryString);\n      apiService.predictPrice(queryString).then(function (data) {\n        _this.results = data;\n        _this.predictingInProgress = false;\n      });\n    },\n    getModelTrainingHistory: function getModelTrainingHistory() {\n      var _this2 = this;\n\n      apiService.getModelTrainingHistory().then(function (data) {\n        _this2.history = data;\n      });\n    },\n    getRowCount: function getRowCount(items) {\n      return items.length;\n    },\n    deleteModel: function deleteModel(modelID) {\n      var _this3 = this;\n\n      console.log('Deleted model: ' + modelID);\n      apiService.deleteModel(modelID).then(function (data) {\n        _this3.getModelTrainingHistory();\n      });\n    }\n  },\n  mounted: function mounted() {\n    //this.getPrediction()\n    this.getModelTrainingHistory();\n  }\n};",{"version":3,"sources":["Dashboard.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuMA,OAAA,UAAA,MAAA,qBAAA;AACA,SAAA,UAAA,QAAA,eAAA;AACA,SAAA,WAAA,QAAA,eAAA;AACA,OAAA,MAAA,MAAA,QAAA;AACA,OAAA,OAAA,MAAA,SAAA;AAEA,IAAA,aAAA,IAAA,UAAA,EAAA;AAEA,eAAA;AACA,QAAA,WADA;AAEA,cAAA;AACA,0BADA;AAEA;AAFA,GAFA;AAMA,QAAA,gBAAA;AACA,WAAA;AACA,eAAA,IADA;AAEA,4BAAA,KAFA;AAGA,kBAAA,OAHA;AAIA,mBAAA,CAJA;AAKA,kBAAA,CALA;AAMA,uBAAA,KANA;AAOA,yBAAA,CAPA;AAQA,mBAAA,EARA;AASA,oBAAA,EATA;AAUA,4BAAA,KAVA;AAWA,eAAA,EAXA;AAYA,qBAAA,CACA;AAAA,aAAA;AAAA,OADA,EAEA;AAAA,aAAA;AAAA,OAFA,EAGA;AAAA,aAAA;AAAA,OAHA,EAIA;AACA,aAAA,cADA;AAEA,mBAAA,mBAAA,KAAA,EAAA;AAAA,iBAAA,OAAA,KAAA,EAAA,MAAA,CAAA,wBAAA,CAAA;AAAA;AAFA,OAJA,EAQA;AAAA,aAAA,aAAA;AACA,mBAAA,mBAAA,KAAA,EAAA;AAAA,iBAAA,QAAA,KAAA,EAAA,MAAA,CAAA,OAAA,CAAA;AAAA;AADA,OARA,EAUA;AAAA,aAAA;AAAA,OAVA,CAZA;AAwBA,mBAAA,CAxBA;AAyBA,eAAA,CAzBA;AA0BA,iBAAA;AA1BA,KAAA;AA4BA,GAnCA;AAoCA,WAAA;AACA,iBADA,2BACA;AAAA;;AACA,WAAA,oBAAA,GAAA,IAAA;AACA,UAAA,cAAA,gBAAA,KAAA,UAAA,GAAA,cAAA,GAAA,KAAA,UAAA,GAAA,qBAAA,GAAA,KAAA,iBAAA,GAAA,mBAAA,GAAA,KAAA,eAAA,GAAA,eAAA,GAAA,KAAA,WAAA,GAAA,eAAA,GAAA,KAAA,WAAA,GAAA,gBAAA,GAAA,KAAA,YAAA,GAAA,cAAA,GAAA,KAAA,oBAAA;AACA,cAAA,GAAA,CAAA,sBAAA,WAAA;AACA,iBAAA,YAAA,CAAA,WAAA,EAAA,IAAA,CAAA,UAAA,IAAA,EAAA;AACA,cAAA,OAAA,GAAA,IAAA;AACA,cAAA,oBAAA,GAAA,KAAA;AACA,OAHA;AAKA,KAVA;AAWA,2BAXA,qCAWA;AAAA;;AACA,iBAAA,uBAAA,GAAA,IAAA,CAAA,UAAA,IAAA,EAAA;AACA,eAAA,OAAA,GAAA,IAAA;AACA,OAFA;AAIA,KAhBA;AAiBA,eAjBA,uBAiBA,KAjBA,EAiBA;AACA,aAAA,MAAA,MAAA;AACA,KAnBA;AAoBA,eApBA,uBAoBA,OApBA,EAoBA;AAAA;;AACA,cAAA,GAAA,CAAA,oBAAA,OAAA;AACA,iBAAA,WAAA,CAAA,OAAA,EAAA,IAAA,CAAA,UAAA,IAAA,EAAA;AACA,eAAA,uBAAA;AACA,OAFA;AAGA;AAzBA,GApCA;AA+DA,SA/DA,qBA+DA;AACA;AACA,SAAA,uBAAA;AACA;AAlEA,CAAA","sourcesContent":["<template>\n  <div class=\"animated fadeIn\">\n    <b-row>\n      <b-col>\n              <TrainModel/>\n      </b-col>\n      <b-col>\n        <b-card>\n          <b-row>\n            <b-col sm=\"5\">\n              <h4 id=\"traffic\" class=\"card-title mb-0\">Predicted V Actual</h4>\n            </b-col>\n            <b-col sm=\"7\" class=\"d-none d-md-block\">\n            </b-col>\n          </b-row>\n          <b-row>\n            <img src=\"/img/charts/predictedvactual.png\" height=\"300\" style=\"margin:auto;\"/>\n          </b-row>\n          <div slot=\"footer\">\n            <b-row class=\"text-center\">\n                <span>Last Updated: </span>\n            </b-row>\n          </div>\n        </b-card>\n      </b-col>\n    </b-row>\n        <b-row>\n      <b-col>\n        <b-card>\n          <b-row>\n            <b-col sm=\"5\">\n              <h1>Test Model Prediction</h1>\n            </b-col>\n            <b-col sm=\"7\" class=\"d-none d-md-block\">\n            </b-col>\n          </b-row>\n          <b-row>\n            <b-col>\n              <b-form-group\n                label=\"Select Machine Learning Model\"\n                label-for=\"model_select_predict\"\n                :label-cols=\"10\"\n                :horizontal=\"false\">\n                <b-form-radio-group id=\"model_select_predict\"\n                  :plain=\"true\"\n                  :options=\"[\n                    {text: 'Random Forrest ',value: 'RFR'},\n                    {text: 'Xtra Trees ',value: 'EXT'},\n                  ]\"\n                  :checked=\"2\" v-model=\"model_select_predict\">\n                </b-form-radio-group>\n              </b-form-group>\n              <hr class=\"nice\" />\n            </b-col>\n          </b-row>\n          <b-row>\n            <b-col>\n              <b-form-group>\n                <label for=\"hotel_code\">Hotel Code</label>\n                <b-form-input type=\"text\" id=\"name_code\" placeholder=\"TEST1\" v-model=\"hotel_code\"></b-form-input>\n              </b-form-group>\n            </b-col>\n            <b-col>\n              <b-form-group\n                label=\"Staff Pick\"\n                label-for=\"staff_pick\"\n                :label-cols=\"10\"\n                :horizontal=\"false\">\n                <b-form-radio-group id=\"staff_pick\"\n                  :plain=\"true\"\n                  :options=\"[\n                    {text: 'Yes ',value: '1'},\n                    {text: 'No ',value: '0'},\n                  ]\"\n                  :checked=\"2\" v-model=\"staff_pick\">\n                </b-form-radio-group>\n              </b-form-group>\n            </b-col>\n          </b-row>\n          <b-row>\n            <b-col>\n              <b-form-group\n                label=\"Accommodation Star Rating\"\n                label-for=\"accom_stars\"\n                :label-cols=\"10\"\n                :horizontal=\"false\">\n                <b-form-radio-group id=\"accom_stars\"\n                  :plain=\"true\"\n                  :options=\"[\n                    {text: '1 ',value: '1'},\n                    {text: '2 ',value: '2'},\n                    {text: '3 ',value: '3'},\n                    {text: '4 ',value: '4'},\n                    {text: '5 ',value: '5'},\n                  ]\"\n                  :checked=\"3\" v-model=\"accom_stars\">\n                </b-form-radio-group>\n              </b-form-group>\n            </b-col>\n          </b-row>\n          <b-row>\n            <b-col>\n              <b-form-group\n                label=\"Trip Advisor Rating\"\n                label-for=\"trip_adv_rating\"\n                :label-cols=\"10\"\n                :horizontal=\"false\">\n                <b-form-radio-group id=\"trip_adv_rating\"\n                  :plain=\"true\"\n                  :options=\"[\n                    {text: '0.5 ' ,value: '0.5'},\n                    {text: '1.0 ',value: '1.0'},\n                    {text: '1.5 ' ,value: '1.5'},\n                    {text: '2.0 ',value: '2.0'},\n                    {text: '2.5 ' ,value: '2.5'},\n                    {text: '3.0 ',value: '3.0'},\n                    {text: '3.5 ' ,value: '3.5'},\n                    {text: '4.0 ',value: '4.0'},\n                    {text: '4.5 ' ,value: '4.5'},\n                    {text: '5.0 ',value: '5.0'},\n                  ]\"\n                  :checked=\"3.0\" v-model=\"trip_adv_rating\">\n                </b-form-radio-group>\n              </b-form-group>\n            </b-col>\n          </b-row>\n          <b-row>\n            <b-col>\n              <b-form-group\n                label=\"Swimming Pool\"\n                label-for=\"has_swimming_pool\"\n                :label-cols=\"10\"\n                :horizontal=\"false\">\n                <b-form-radio-group id=\"has_swimming_pool\"\n                  :plain=\"true\"\n                  :options=\"[\n                    {text: 'Yes ',value: '1'},\n                    {text: 'No ',value: '0'},\n                  ]\"\n                  :checked=\"2\" v-model=\"has_swimming_pool\">\n                </b-form-radio-group>\n              </b-form-group>\n            </b-col>\n            <b-col>\n              <b-form-group>\n                <label for=\"travel_week\">Travel Week #/52</label>\n                <b-form-input type=\"text\" id=\"travel_week\" placeholder=\"26\" v-model=\"travel_week\"></b-form-input>\n              </b-form-group>\n            </b-col>\n            <b-col>\n              <b-form-group>\n                <label for=\"booking_week\">Booking Week #/52</label>\n                <b-form-input type=\"text\" id=\"booking_week\" placeholder=\"26\" v-model=\"booking_week\"></b-form-input>\n              </b-form-group>\n            </b-col>\n          </b-row>\n          <div slot=\"footer\">\n            <b-row>\n              <b-col class=\"col-sm-3\">\n                <b-button type=\"submit\" size=\"sm\" variant=\"primary\" v-on:click=\"getPrediction\"><i class=\"fa fa-dot-circle-o\"></i> Predict Price</b-button>\n              </b-col>\n              <b-col class=\"col-sm-9\">\n                <b-row v-if=\"predictingInProgress\">\n                    <b-col class=\"col-sm-2\">\n                        <div>\n                            <atom-spinner\n                            :animation-duration=\"1000\"\n                            :size=\"30\"\n                            color=\"#20a8d8\"\n                            />\n                        </div>\n                    </b-col>\n                    <b-col class=\"col-sm-10\">\n                        <span class=\"predicting-text\">Predicting in progress...</span>\n                    </b-col>\n                </b-row>\n                <div v-if=\"results !== null\">Predicted Price: {{ results.RecommendedPrice[0] | currency}}</div>\n              </b-col>\n            </b-row>\n          </div>\n        </b-card>\n      </b-col>\n      <b-col>\n        <b-card header=\"Model Training History\">\n          <b-table striped hover responsive=\"sm\" :items=\"history\" :fields=\"historyFields\" :current-page=\"currentPage\" :per-page=\"perPage\">\n            <template slot=\"actions\" slot-scope=\"cell\">\n              <b-btn size=\"sm\" v-if=\"cell.item.model_file\" @click.stop=\"deleteModel(cell.item.id)\">Delete</b-btn>\n            </template>\n          </b-table>\n          <nav>\n            <b-pagination :total-rows=\"getRowCount(history)\" :per-page=\"perPage\" v-model=\"currentPage\" prev-text=\"Prev\" next-text=\"Next\" hide-goto-end-buttons/>\n          </nav>\n        </b-card>\n      </b-col>\n    </b-row>\n  </div>\n</template>\n\n<script>\nimport TrainModel from './custom/TrainModel'\nimport {APIService} from '../APIService'\nimport { AtomSpinner } from 'epic-spinners'\nimport moment from 'moment'\nimport numeral from 'numeral'\n\nconst apiService = new APIService();\n\nexport default {\n  name: 'dashboard',\n  components: {\n    TrainModel,\n    AtomSpinner\n  },\n  data: function () {\n    return {\n      results: null,\n      model_select_predict: 'RFR',\n      hotel_code: 'TEST1',\n      accom_stars: 3,\n      staff_pick: 0,\n      trip_adv_rating: '3.0',\n      has_swimming_pool: 1,\n      travel_week: 26,\n      booking_week: 26,\n      predictingInProgress: false,\n      history: [],\n      historyFields: [\n        {key: 'id'},\n        {key: 'model_type'},\n        {key: 'dependent_variable'},\n        {\n          key: 'trained_date',\n          formatter: (value) => { return moment(value).format('MMM Do YYYY, h:mm:ss a') }\n        },\n        {key: 'accuracy_r2',\n          formatter: (value) => { return numeral(value).format('0.00%')}},\n        {key: 'actions'}\n      ],\n      currentPage: 1,\n      perPage: 8,\n      totalRows: 0\n    }\n  },\n  methods: {\n    getPrediction(){\n      this.predictingInProgress = true\n      let queryString = 'hotel_code=' + this.hotel_code + '&staff_pick=' + this.staff_pick + '&has_swimming_pool=' + this.has_swimming_pool + '&trip_adv_rating=' + this.trip_adv_rating + '&accom_stars=' + this.accom_stars + '&travel_week=' + this.travel_week + '&booking_week=' + this.booking_week + '&model_type=' + this.model_select_predict\n      console.log('Query String is: ' + queryString)\n      apiService.predictPrice(queryString).then((data) => {\n              this.results = data;\n              this.predictingInProgress = false\n          })\n      \n      },\n      getModelTrainingHistory(){\n      apiService.getModelTrainingHistory().then((data) => {\n              this.history = data;\n          })\n      \n      },\n      getRowCount (items) {\n        return items.length\n      },\n      deleteModel (modelID) {\n        console.log('Deleted model: ' + modelID)\n        apiService.deleteModel(modelID).then((data) => {\n              this.getModelTrainingHistory()\n          })\n      }\n  },\n  mounted () {\n    //this.getPrediction()\n    this.getModelTrainingHistory()\n  }\n}\n</script>\n\n<style>\n  /* IE fix */\n  #card-chart-01, #card-chart-02 {\n    width: 100% !important;\n  }\n  hr.nice {\n    border-top: 1px dotted #8c8b8b;\n    border-bottom: 1px dotted #fff;\n  }\n  .predicting-text {\n        margin-top:5px;\n        color:#20a8d8;\n        vertical-align: middle;\n        display: inline-block;\n    }\n</style>\n"],"sourceRoot":"src/views"}]}