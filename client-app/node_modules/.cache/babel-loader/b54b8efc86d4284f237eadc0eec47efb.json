{"remainingRequest":"/Users/robertgray/sandbox/price-recommender/client-app/node_modules/babel-loader/lib/index.js!/Users/robertgray/sandbox/price-recommender/client-app/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/robertgray/sandbox/price-recommender/client-app/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/robertgray/sandbox/price-recommender/client-app/src/views/custom/FileUpload.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/robertgray/sandbox/price-recommender/client-app/src/views/custom/FileUpload.vue","mtime":1540497080944},{"path":"/Users/robertgray/sandbox/price-recommender/client-app/node_modules/cache-loader/dist/cjs.js","mtime":1539889924615},{"path":"/Users/robertgray/sandbox/price-recommender/client-app/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/robertgray/sandbox/price-recommender/client-app/node_modules/cache-loader/dist/cjs.js","mtime":1539889924615},{"path":"/Users/robertgray/sandbox/price-recommender/client-app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.from\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es7.promise.finally\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport * as d3 from 'd3';\nimport { APIService } from '../../APIService';\nvar apiService = new APIService();\nvar STATUS_INITIAL = 0,\n    STATUS_SAVING = 1,\n    STATUS_SUCCESS = 2,\n    STATUS_FAILED = 3;\nexport default {\n  data: function data() {\n    return {\n      uploadedFiles: [],\n      accuracy: null,\n      uploadError: null,\n      currentStatus: null,\n      uploadFieldName: 'csv'\n    };\n  },\n  computed: {\n    isInitial: function isInitial() {\n      return this.currentStatus === STATUS_INITIAL;\n    },\n    isSaving: function isSaving() {\n      return this.currentStatus === STATUS_SAVING;\n    },\n    isSuccess: function isSuccess() {\n      return this.currentStatus === STATUS_SUCCESS;\n    },\n    isFailed: function isFailed() {\n      return this.currentStatus === STATUS_FAILED;\n    }\n  },\n  methods: {\n    reset: function reset() {\n      // reset form to initial state\n      this.currentStatus = STATUS_INITIAL;\n      this.uploadedFiles = [];\n      this.uploadError = null;\n    },\n    save: function save(formData) {\n      var _this = this;\n\n      // upload data to the server\n      this.currentStatus = STATUS_SAVING;\n      apiService.uploadFile(formData).then(function (x) {\n        _this.uploadedFiles = [].concat(x);\n        _this.currentStatus = STATUS_SUCCESS;\n      }).catch(function (err) {\n        _this.uploadError = err.response;\n        _this.currentStatus = STATUS_FAILED;\n      });\n    },\n    filesChange: function filesChange(fieldName, fileList) {\n      // handle file changes\n      var formData = new FormData();\n      if (!fileList.length) return; // append the files to FormData\n\n      Array.from(Array(fileList.length).keys()).map(function (x) {\n        formData.append(fieldName, fileList[x], fileList[x].name);\n      }); // save it\n\n      this.save(formData);\n    },\n    trainModel: function trainModel() {\n      var _this2 = this;\n\n      var queryString = '';\n      console.log('Query String is: ' + queryString);\n      apiService.trainModel(queryString).then(function (data) {\n        _this2.accuracy = data;\n      });\n    }\n  },\n  mounted: function mounted() {\n    this.reset();\n  }\n};",{"version":3,"sources":["FileUpload.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwDA,OAAA,KAAA,EAAA,MAAA,IAAA;AACA,SAAA,UAAA,QAAA,kBAAA;AACA,IAAA,aAAA,IAAA,UAAA,EAAA;AAEA,IAAA,iBAAA,CAAA;AAAA,IAAA,gBAAA,CAAA;AAAA,IAAA,iBAAA,CAAA;AAAA,IAAA,gBAAA,CAAA;AAEA,eAAA;AACA,QAAA,gBAAA;AACA,WAAA;AACA,qBAAA,EADA;AAEA,gBAAA,IAFA;AAGA,mBAAA,IAHA;AAIA,qBAAA,IAJA;AAKA,uBAAA;AALA,KAAA;AAOA,GATA;AAUA,YAAA;AACA,aADA,uBACA;AACA,aAAA,KAAA,aAAA,KAAA,cAAA;AACA,KAHA;AAIA,YAJA,sBAIA;AACA,aAAA,KAAA,aAAA,KAAA,aAAA;AACA,KANA;AAOA,aAPA,uBAOA;AACA,aAAA,KAAA,aAAA,KAAA,cAAA;AACA,KATA;AAUA,YAVA,sBAUA;AACA,aAAA,KAAA,aAAA,KAAA,aAAA;AACA;AAZA,GAVA;AAwBA,WAAA;AACA,SADA,mBACA;AACA;AACA,WAAA,aAAA,GAAA,cAAA;AACA,WAAA,aAAA,GAAA,EAAA;AACA,WAAA,WAAA,GAAA,IAAA;AACA,KANA;AAOA,QAPA,gBAOA,QAPA,EAOA;AAAA;;AACA;AACA,WAAA,aAAA,GAAA,aAAA;AAEA,iBAAA,UAAA,CAAA,QAAA,EACA,IADA,CACA,aAAA;AACA,cAAA,aAAA,GAAA,GAAA,MAAA,CAAA,CAAA,CAAA;AACA,cAAA,aAAA,GAAA,cAAA;AACA,OAJA,EAKA,KALA,CAKA,eAAA;AACA,cAAA,WAAA,GAAA,IAAA,QAAA;AACA,cAAA,aAAA,GAAA,aAAA;AACA,OARA;AASA,KApBA;AAqBA,eArBA,uBAqBA,SArBA,EAqBA,QArBA,EAqBA;AACA;AACA,UAAA,WAAA,IAAA,QAAA,EAAA;AAEA,UAAA,CAAA,SAAA,MAAA,EAAA,OAJA,CAMA;;AACA,YACA,IADA,CACA,MAAA,SAAA,MAAA,EAAA,IAAA,EADA,EAEA,GAFA,CAEA,aAAA;AACA,iBAAA,MAAA,CAAA,SAAA,EAAA,SAAA,CAAA,CAAA,EAAA,SAAA,CAAA,EAAA,IAAA;AACA,OAJA,EAPA,CAaA;;AACA,WAAA,IAAA,CAAA,QAAA;AACA,KApCA;AAqCA,cArCA,wBAqCA;AAAA;;AACA,UAAA,cAAA,EAAA;AACA,cAAA,GAAA,CAAA,sBAAA,WAAA;AACA,iBAAA,UAAA,CAAA,WAAA,EAAA,IAAA,CAAA,UAAA,IAAA,EAAA;AACA,eAAA,QAAA,GAAA,IAAA;AACA,OAFA;AAGA;AA3CA,GAxBA;AAqEA,SArEA,qBAqEA;AACA,SAAA,KAAA;AACA;AAvEA,CAAA","sourcesContent":["<template>\n    <b-card>\n          <b-row>\n            <b-col>\n            <form enctype=\"multipart/form-data\" novalidate v-if=\"isInitial || isSaving\">\n                <h1>Upload CSV File</h1>\n                <div class=\"dropbox\">\n                <input type=\"file\" multiple :name=\"uploadFieldName\" :disabled=\"isSaving\" @change=\"filesChange($event.target.name, $event.target.files); fileCount = $event.target.files.length\"\n                    accept=\"text/csv\" class=\"input-file\">\n                    <p v-if=\"isInitial\">\n                    Drop your file(s) here <br> or click to browse\n                    </p>\n                    <p v-if=\"isSaving\">\n                    Uploading {{ fileCount }} files...\n                    </p>\n                </div>\n            </form>\n            </b-col>\n          </b-row>\n          <b-row>\n              <b-col>\n                  <div v-if=\"isSuccess\">\n                    <h2>Uploaded {{ uploadedFiles.length }} file(s) successfully.</h2>\n                    <p>\n                    <a href=\"javascript:void(0)\" @click=\"reset()\">Upload again</a>\n                    </p>\n                    <ul class=\"list-unstyled\">\n                    <li v-for=\"item in uploadedFiles\">\n                        <img :src=\"item.url\" class=\"img-responsive img-thumbnail\" :alt=\"item.originalName\">\n                    </li>\n                    </ul>\n                </div>\n                <!--FAILED-->\n                <div v-if=\"isFailed\">\n                    <h2>Uploaded failed.</h2>\n                    <p>\n                    <a href=\"javascript:void(0)\" @click=\"reset()\">Try again</a>\n                    </p>\n                    <pre>{{ uploadError }}</pre>\n                </div>\n              </b-col>\n          </b-row>\n          <div slot=\"footer\">\n            <b-row>\n                <b-col class=\"col-sm-3\">\n                    <b-button type=\"submit\" size=\"sm\" variant=\"primary\" v-on:click=\"trainModel\"><i class=\"fa fa-dot-circle-o\"></i> Train Model</b-button>\n                </b-col>\n                <b-col class=\"col-sm-9\">\n                    <div id=\"accuracy\"><span v-if=\"accuracy !== null\">Accuracy: {{ accuracy.R2 }}</span></div>\n                </b-col>\n            </b-row>\n          </div>\n        </b-card>\n</template>\n\n<script>\nimport * as d3 from 'd3';\nimport {APIService} from '../../APIService'\nconst apiService = new APIService();\n\nconst STATUS_INITIAL = 0, STATUS_SAVING = 1, STATUS_SUCCESS = 2, STATUS_FAILED = 3;\n\n  export default {\n    data: function() {\n        return {\n        uploadedFiles: [],\n        accuracy: null,\n        uploadError: null,\n        currentStatus: null,\n        uploadFieldName: 'csv'\n        };\n    },\n    computed: {\n      isInitial() {\n        return this.currentStatus === STATUS_INITIAL;\n      },\n      isSaving() {\n        return this.currentStatus === STATUS_SAVING;\n      },\n      isSuccess() {\n        return this.currentStatus === STATUS_SUCCESS;\n      },\n      isFailed() {\n        return this.currentStatus === STATUS_FAILED;\n      }\n    },\n    methods: {\n        reset() {\n            // reset form to initial state\n            this.currentStatus = STATUS_INITIAL;\n            this.uploadedFiles = [];\n            this.uploadError = null;\n        },\n        save(formData) {\n        // upload data to the server\n        this.currentStatus = STATUS_SAVING;\n\n            apiService.uploadFile(formData)\n                .then(x => {\n                this.uploadedFiles = [].concat(x);\n                this.currentStatus = STATUS_SUCCESS;\n                })\n                .catch(err => {\n                this.uploadError = err.response;\n                this.currentStatus = STATUS_FAILED;\n                });\n            },\n            filesChange(fieldName, fileList) {\n            // handle file changes\n            const formData = new FormData();\n\n            if (!fileList.length) return;\n\n            // append the files to FormData\n            Array\n                .from(Array(fileList.length).keys())\n                .map(x => {\n                formData.append(fieldName, fileList[x], fileList[x].name);\n                });\n\n            // save it\n            this.save(formData);\n        },\n        trainModel(){\n            let queryString = ''\n            console.log('Query String is: ' + queryString)\n            apiService.trainModel(queryString).then((data) => {\n                    this.accuracy = data;\n                })\n        },\n    },\n    mounted() {\n        this.reset();\n    }\n  }\n</script>\n\n<style>\n    .dropbox {\n        outline: 2px dashed grey; /* the dash box */\n        outline-offset: -10px;\n        background: lightcyan;\n        color: dimgray;\n        padding: 10px 10px;\n        min-height: 200px; /* minimum height */\n        position: relative;\n        cursor: pointer;\n    }\n\n    .input-file {\n        opacity: 0; /* invisible but it's there! */\n        width: 100%;\n        height: 200px;\n        position: absolute;\n        cursor: pointer;\n    }\n\n    .dropbox:hover {\n        background: lightblue; /* when mouse over to the drop zone, change color */\n    }\n\n    .dropbox p {\n        font-size: 1.2em;\n        text-align: center;\n        padding: 50px 0;\n    }\n</style>"],"sourceRoot":"src/views/custom"}]}